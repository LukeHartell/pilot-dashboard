<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Profile | Pilot Dashboard</title>
    <link rel="icon" href="assets/img/favicon.ico" />
    <link rel="stylesheet" href="assets/css/base.css" />
    <link rel="stylesheet" href="assets/css/layout.css" />
    <link rel="stylesheet" href="assets/css/nav.css" />
    <link rel="stylesheet" href="assets/css/darkmode.css" />
    <link rel="stylesheet" href="assets/css/widgets.css" />
    <script defer src="assets/js/header.js"></script>
    <script defer src="assets/js/user-menu.js"></script>
  </head>
  <body>
    <div class="scaling-wrapper">
      <!-- Header will be injected here -->

      <main>
        <section id="user">
          <h2>User Profile</h2>
          <div id="userGrid" class="widget-grid">
            <!-- Widget: Basic Info -->
            <div class="widget" id="userInfoWidget">
              <div class="widget-buttons">
                <button
                  id="editProfileButton"
                  class="edit-btn"
                  title="Edit Profile">
                  ‚úèÔ∏è
                </button>
                <button class="fullscreen-btn" title="Fullscreen">‚õ∂</button>
              </div>
              <h3 id="userInfoHeader">üë§</h3>
              <p>
                <strong>Name:</strong>
                <span id="userName">Loading...</span>
              </p>
              <p>
                <strong>Email:</strong>
                <span id="userEmail">Loading...</span>
              </p>
              <button
                id="logoutButton"
                style="
                  margin-top: 10px;
                  width: 50%;
                  height: 35px;
                  color: darkred;
                  border-color: darkred;
                  border-radius: inherit;
                ">
                Log Out
              </button>
            </div>

            <!-- Widget: Fit for flying? -->
            <div class="widget" id="fitWidget">
              <div class="widget-buttons">
                <button
                  id="scoreHelpBtn"
                  class="help-btn"
                  title="What do these scores mean?">
                  ?
                </button>

                <button class="fullscreen-btn" title="Fullscreen">‚õ∂</button>
              </div>
              <h3>üõ©Ô∏è Fit for flying?</h3>
              <div id="fitnessScores">
                <p
                  id="fitnessScore"
                  title="Overall flying fitness combining recency and experience">
                  Loading...
                </p>
                <span>
                  <p
                    id="experienceScore"
                    title="Experience score measures your flying activity in the last 12 months"></p>
                  <p
                    id="recencyScore"
                    title="Recency score measures how recently you flew, adjusted by experience"></p>
                </span>
              </div>
              <div id="fitDetails">
                <p>
                  <strong>Last flight:</strong>
                  <span id="lastFlightAgo">-</span>
                </p>
                <p>
                  <strong>Flights last 12 months:</strong>
                  <span id="flights12m">-</span>
                </p>
                <p>
                  <strong>Airtime last 12 months:</strong>
                  <span id="airtime12m">-</span>
                </p>
                <p id="fitMessage"></p>
              </div>
            </div>

            <!-- Widget: Stats -->
            <div class="widget" id="statsWidget">
              <div class="widget-buttons">
                <button class="fullscreen-btn" title="Fullscreen">‚õ∂</button>
              </div>
              <h3>üìà Your Stats</h3>
              <div id="statsDetails">
                <p>
                  <strong>Total flights:</strong>
                  <span id="statTotalFlights">-</span>
                </p>
                <p>
                  <strong>Total air time:</strong>
                  <span id="statTotalMinutes">-</span>
                </p>
                <p>
                  <strong>Favorite plane (flights):</strong>
                  <span id="statFavPlaneFlights">-</span>
                </p>
                <p>
                  <strong>Favorite plane (time):</strong>
                  <span id="statFavPlaneTime">-</span>
                </p>
                <p>
                  <strong>Favorite airbase:</strong>
                  <span id="statFavBase">-</span>
                </p>
                <p>
                  <strong>Longest flight:</strong>
                  <span id="statLongest">-</span>
                </p>
              </div>
            </div>

            <!-- Widget: Certifications -->
            <div class="widget" id="certWidget">
              <div class="widget-buttons">
                <button
                  id="addCertBtn"
                  class="edit-btn"
                  type="button"
                  title="Add Certification">‚ûï</button>
                <button class="fullscreen-btn" title="Fullscreen">‚õ∂</button>
              </div>
              <h3>üèÖ Certifications</h3>
              <div id="certList">
                <p>Loading...</p>
              </div>
            </div>

          </div>
        </section>
      </main>
    </div>

    <!-- Modals -->
    <div id="widgetModal">
      <div class="modal-content">
        <button class="close-modal" id="closeModalBtn" title="Close">‚úï</button>
        <div id="modalContent"></div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/nav.js" defer></script>
    <script src="assets/js/simpleMarkdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/js/user.js" defer></script>
    <script src="assets/js/certifications.js" defer></script>
    <script src="assets/js/darkmode.js" defer></script>
  </body>
</html>
